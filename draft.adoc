= Comparativa de tecnologías de servidor para servicios basados en websocket
Michel Maes Bermejo <m.maes@alumnos.urjc.es>
:toc:
:toc-title: Contenido
:doctype: book
:source-highlighter: rouge
:pdf-stylesdir: resources/themes
:imagesdir: resources/images
:pdf-fontsdir: resources/fonts
:no title:

[abstract]
== Resumen

Página resumiendo el contenido de la memoria. Esta página se escribe cuando ya se
ha escrito toda la memoria.

== 1. Introducción y Motivación

Hoy en día, un desarrollador de software tiene múltiples herramientas (entre lenguajes y librerías) para abordar cualquier proyecto que tenga entre manos. Es una práctica común usar una tecnología concreta sobre la que sentimos predilección o las que creemos que pueden resolver mejor nuestro problema. En ocasiones, nos equivocamos en nuestra elección y descartamos opciones mucho más efectivas.

Este problema de desinformación puede abordarse mediante el estudio de las distintas tecnologías que proponen una solución al mismo, pero dado que el ámbito del desarrollo software es muy amplio, vamos a centrarnos en las tecnologías de servidor para servicios basados en WebSockets.

Estas tecnologías proporcionan una comunicación en tiempo real con clientes muy diversos (aplicaciones móviles, navegadores, otro servidores…). Un ejemplo actual son los servicios de mensajería instantánea cómo WhatsApp o Telegram. Hoy en día este tipo de aplicaciones tienen un impacto drástico en la vida diaria, siendo casi una herramienta imprescindible, por lo que prevenir una caída de servicio ante un alto número de clientes es fundamental.

.Crecimiento de WhatsApp en los últimos 4 años
image::./crecWhastApp.png[Crecimiento WhatsApp, pdfwidth=90%]

La motivación de este proyecto surge de la necesidad de comprender mejor estas tecnologías y proporcionar argumentos sólidos que justifiquen el uso de una u otra, dependiendo de las necesidades de nuestro proyecto y de los recursos de los que dispongamos.

== 2. Objetivos

El objetivo principal de este proyecto será realizar una comparativa entre distintas
tecnologías que den solución a la comunicación en tiempo real mediante el uso de WebSockets.

Con este fin, se implementará una aplicación de mensajería instantánea
(que a partir de ahora denominaremos simplemente Chat) para cada tecnología y un cliente
común capaz de probarlas y recoger distintas métricas, que serán el factor determinante a
la hora de realizar la comparativa.

Otro objetivo relevante del proyecto será su extensibilidad, de forma que cualquier
desarrollador pueda implementar su aplicación de chat, sumarla a la comparativa y
así contribuir al proyecto.

== 3. Tecnologías, Herramientas y Metodologías

=== 3.1 Tecnologías

De la multitud de lenguajes de programación que existen válidos para afrontar el
desarrollo de un servidor basado en WebSocket nuestra primera opción ha sido
seleccionar Java, que dispone de múltiples librerías interesantes para abordar
el problema además de ser uno de os lenguajes de programación más extendidos,
populares y con una amplia comunidad, como demuestra el informe TIOBE (Ver __Figura 2__).
De forma adicional, se ha incluido también Node.js, tecnología muy popular en
los últimos años que promete ser ligera y eficiente.

.Indice Tiobe
image::./tiobe.png[tiobe]

==== 3.1.1 WebSockets

.Logo WebSocket
image::./websockets-logo.png[websocket, pdfwidth=40%]

RFC 6455 <<1>> define WebSocket como un protocolo que proporciona un canal de comunicación bidireccional y full-dúplex sobre un único socket TCP. Aunque inicialmente estaba pensada para comunicaciones entre el navegador y el servidor web, puede usarse también para aplicaciones cliente/servidor.

Por otro lado, W3C se encarga de normalizar la API<<2>> de WebSocket.  Define una interfaz para el navegador compuesta por 4 métodos que corresponder a handlers para los diferentes eventos que maneja.

[source,javascript]
var socket = new WebSocket('ws://example.com:9000/chat');
// Send new text
socket.send("Some text");
socket.onmessage = function(event) {
    var data = JSON.parse(event.data);
    // Use data
});
socket.onopen  = function(e){ console.log("WS Opened")};
socket.onclose = function(e){ console.log("WS Closed")};

== 4. Descripción informática

Descripción del proyecto realizado. Después de unos párrafos introductorios el capítulo se divide en subcapítulos. (de 40 a 80 páginas)

=== 4.1. Requisitos

Descripción detallada de las funcionalidades que tendría que implementar la aplicación (pues se asume que los requisitos se escriben antes de empezar el desarrollo). Pueden tener forma de historias de usuario o bien ser una lista de requisitos funcionales y no funcionales.

=== 4.2. Arquitectura y Análisis

Descripción de los aspectos de alto nivel de la aplicación. Diagramas de clases de análisis, diagramas de clases de diseño, etc. Se debe incluir la suficiente información para que el lector pueda entender la estructura de alto nivel del software desarrollado. Se pueden incluir diagramas de casos de uso si se considera útil.

=== 4.3. Diseño e Implementación

Descripción de algún aspecto relevante de la implementación que quiera mencionarse. Por ejemplo se podría incluir alguno de los siguientes aspectos:
- Algoritmo complejo que se haya tenido que desarrollar.
- Integración entre librerías problemática.
- Resolución de algún bug que haya sido especialmente problemático.
- Focalizar en alguna parte del desarrollo y describirla en más detalle
- En esta sección se pueden incluir fragmentos de código fuente. En este apartado se pueden incluir algunas métricas del proyecto (Nº de clases, líneas de código, etc…). También se puede incluir la evolución del repositorio de github (gráfico de commits por día).

=== 4.2. Pruebas

En esta sección se describen las pruebas automáticas que han sido implementadas para el proyecto. Sobre los tests, conviene indicar la cobertura del código. Si no se han implementado pruebas automáticas, deberían haberse implementarse y describirse aquí o tener una buena justificación de por qué no se han implementado.

== 5. Conclusiones y trabajos futuros

Reflexión sobre el trabajo realizado, qué objetivos se han cumplido y qué aspectos quedan pendientes para una futura ampliación del proyecto. Además se deben incluir unas conclusiones personales indicando lo que ha supuesto para el alumno la realización del trabajo. Entre 2 y 5 páginas.

== Bibliografía

Deben ir numerados y referenciados en las partes del texto en las que se haga referencia a ellos.


[bibliography]
[[[1]]] https://tools.ietf.org/html/rfc6455

[[[2]]] https://www.w3.org/TR/2011/WD-websockets-20110929


== Anexos

- Instrucciones de construcción del software desde el repositorio github
- Instalación del software para que se pueda usar
- Manual de uso (básico)
- También pueden incluirse como anexo:
- Formato de los ficheros utilizados
